/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * MainWindow.java
 *
 * Created on 19.03.2009, 15:22:12
 */

package at.ac.uibk.dps.wmsxgui.presentation;

import hu.kfki.grid.wmsx.TransportJobUID;
import hu.kfki.grid.wmsx.Wmsx;

import java.awt.Dimension;
import java.awt.Image;
import java.awt.Rectangle;
import java.util.Enumeration;
import java.util.Observable;
import java.util.Observer;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreePath;

import net.jini.id.Uuid;
import at.ac.uibk.dps.wmsxgui.business.BusinessManager;
import at.ac.uibk.dps.wmsxgui.business.JobData;
import at.ac.uibk.dps.wmsxgui.business.JobTableModel;
import at.ac.uibk.dps.wmsxgui.presentation.util.MyTreeCellRenderer;

/**
 * 
 * @author bafu
 */
public class MainWindow extends javax.swing.JFrame implements Observer {

    private final BusinessManager  businessman;
    private final Wmsx             wmsx_service;
    private JFrame                 optionen;
    private DefaultMutableTreeNode rootNode;
    private DefaultTreeModel       treeModel;

    /** Creates new form MainWindow */
    public MainWindow() {
        this.businessman = BusinessManager.getInstance();
        this.wmsx_service = this.businessman.getWmsxService();

        this.businessman.addObserver(this);

        this.initComponents();

        this.table_jobs.setModel(new JobTableModel());
        this.updateTreeModel();

        if (!this.businessman.isOnline()) {
            this.setTitle("WMSX GUI - Offline Demo Mode");

            this.menu_item_newjob.setEnabled(false);
            this.menu_item_options.setEnabled(false);
            this.menu_item_stopserver.setEnabled(false);

            this.btn_add.setEnabled(false);
            this.btn_remove.setEnabled(false);
            this.btn_ping.setEnabled(false);

            this.btn_kill.setEnabled(false);
            this.btn_refresh.setEnabled(false);
        }

        // verstecke tabelle
        // panel_table.setVisible(false);
        this.panel_jobdetails.setVisible(false);

        // disable remove buttons
        this.btn_remove.setEnabled(false);
        this.btn_kill.setEnabled(false);

        this.tree_jobs.setCellRenderer(new MyTreeCellRenderer());

        // Set icon
        final Image icon = (new ImageIcon(this.getClass()
                .getResource("/icon.png"))).getImage();
        this.setIconImage(icon);

        this.centerScreen();
    }

    /**
     * Positioniert das Fenster genau in der Mitte des Bildschirmes...
     * 
     */
    private void centerScreen() {
        final Dimension dim = this.getToolkit().getScreenSize();
        final Rectangle abounds = this.getBounds();
        this.setLocation((dim.width - abounds.width) / 2,
                         (dim.height - abounds.height) / 2);
        this.requestFocus();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed"
    // desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        this.jSplitPane1 = new javax.swing.JSplitPane();
        this.jPanelRight = new javax.swing.JPanel();
        this.panel_top = new javax.swing.JPanel();
        this.panel_table = new javax.swing.JScrollPane();
        this.table_jobs = new javax.swing.JTable();
        this.panel_jobdetails = new javax.swing.JPanel();
        this.jLabel1 = new javax.swing.JLabel();
        this.jLabel2 = new javax.swing.JLabel();
        this.jLabel3 = new javax.swing.JLabel();
        this.jLabel4 = new javax.swing.JLabel();
        this.jLabel5 = new javax.swing.JLabel();
        this.jLabel6 = new javax.swing.JLabel();
        this.tb_jobdetails_jobuid = new javax.swing.JTextField();
        this.tb_jobdetails_state = new javax.swing.JTextField();
        this.tb_jobdetails_siteid = new javax.swing.JTextField();
        this.tb_jobdetails_creationtime = new javax.swing.JTextField();
        this.tb_jobdetails_startedtime = new javax.swing.JTextField();
        this.tb_jobdetails_donetime = new javax.swing.JTextField();
        this.panel_description = new javax.swing.JPanel();
        this.jLabel7 = new javax.swing.JLabel();
        this.tb_jobdetails_executable = new javax.swing.JTextField();
        this.jLabel9 = new javax.swing.JLabel();
        this.tb_jobdetails_output = new javax.swing.JTextField();
        this.jLabel10 = new javax.swing.JLabel();
        this.jScrollPane1 = new javax.swing.JScrollPane();
        this.ta_jobdetails_description = new javax.swing.JTextArea();
        this.jLabel8 = new javax.swing.JLabel();
        this.tb_jobdetails_workerID = new javax.swing.JTextField();
        this.panel_buttons = new javax.swing.JPanel();
        this.l_selectedjob = new javax.swing.JLabel();
        this.btn_kill = new javax.swing.JButton();
        this.btn_refresh = new javax.swing.JButton();
        this.btn_cleanup = new javax.swing.JButton();
        this.btn_kill1 = new javax.swing.JButton();
        this.sp_tree = new javax.swing.JScrollPane();
        this.tree_jobs = new javax.swing.JTree();
        this.toolbar_main = new javax.swing.JToolBar();
        this.btn_add = new javax.swing.JButton();
        this.jButton3 = new javax.swing.JButton();
        this.btn_remove = new javax.swing.JButton();
        this.btn_ping = new javax.swing.JButton();
        this.jButton1 = new javax.swing.JButton();
        this.jButton2 = new javax.swing.JButton();
        this.jMenuBar1 = new javax.swing.JMenuBar();
        this.menu_file = new javax.swing.JMenu();
        this.menu_item_newjob = new javax.swing.JMenuItem();
        this.menu_item_stopserver = new javax.swing.JMenuItem();
        this.menu_item_options = new javax.swing.JMenuItem();
        this.menu_item_exit = new javax.swing.JMenuItem();

        this
                .setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        this.setTitle("WMSX GUI");
        this.setMinimumSize(new java.awt.Dimension(362, 424));

        this.jSplitPane1.setDividerSize(5);

        this.jPanelRight.setMinimumSize(new java.awt.Dimension(200, 268));
        this.jPanelRight.setPreferredSize(new java.awt.Dimension(200, 200));

        this.panel_top.setMinimumSize(new java.awt.Dimension(200, 250));
        this.panel_top.setPreferredSize(new java.awt.Dimension(596, 250));

        this.panel_table.setAutoscrolls(true);

        this.table_jobs.setAutoCreateRowSorter(true);
        this.table_jobs
                .setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        this.table_jobs.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(final java.awt.event.MouseEvent evt) {
                MainWindow.this.table_jobsMouseClicked(evt);
            }
        });
        this.panel_table.setViewportView(this.table_jobs);

        this.panel_jobdetails.setBorder(javax.swing.BorderFactory
                .createTitledBorder("Job Details"));
        this.panel_jobdetails.setMinimumSize(new java.awt.Dimension(188, 241));

        this.jLabel1.setText("JobUID");

        this.jLabel2.setText("State");

        this.jLabel3.setText("SiteID");

        this.jLabel4.setText("Created");

        this.jLabel5.setText("Started");

        this.jLabel6.setText("Finished");

        this.tb_jobdetails_jobuid.setEditable(false);

        this.tb_jobdetails_state.setEditable(false);

        this.tb_jobdetails_siteid.setEditable(false);

        this.tb_jobdetails_creationtime.setEditable(false);

        this.tb_jobdetails_startedtime.setEditable(false);

        this.tb_jobdetails_donetime.setEditable(false);

        this.jLabel7.setText("Executable");

        this.tb_jobdetails_executable.setEditable(false);

        this.jLabel9.setText("Output");

        this.tb_jobdetails_output.setEditable(false);

        this.jLabel10.setText("Description");

        this.ta_jobdetails_description.setColumns(20);
        this.ta_jobdetails_description.setEditable(false);
        this.ta_jobdetails_description.setRows(5);
        this.jScrollPane1.setViewportView(this.ta_jobdetails_description);

        final javax.swing.GroupLayout panel_descriptionLayout = new javax.swing.GroupLayout(
                this.panel_description);
        this.panel_description.setLayout(panel_descriptionLayout);
        panel_descriptionLayout
                .setHorizontalGroup(panel_descriptionLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  panel_descriptionLayout
                                          .createSequentialGroup()
                                          .addGroup(
                                                    panel_descriptionLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.LEADING)
                                                            .addComponent(
                                                                          this.jLabel10,
                                                                          javax.swing.GroupLayout.Alignment.TRAILING)
                                                            .addComponent(
                                                                          this.jLabel9,
                                                                          javax.swing.GroupLayout.Alignment.TRAILING)
                                                            .addComponent(
                                                                          this.jLabel7,
                                                                          javax.swing.GroupLayout.Alignment.TRAILING))
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addGroup(
                                                    panel_descriptionLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.LEADING)
                                                            .addComponent(
                                                                          this.tb_jobdetails_executable,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          460,
                                                                          Short.MAX_VALUE)
                                                            .addComponent(
                                                                          this.jScrollPane1,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          460,
                                                                          Short.MAX_VALUE)
                                                            .addComponent(
                                                                          this.tb_jobdetails_output,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          460,
                                                                          Short.MAX_VALUE))));
        panel_descriptionLayout
                .setVerticalGroup(panel_descriptionLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  panel_descriptionLayout
                                          .createSequentialGroup()
                                          .addGap(18, 18, 18)
                                          .addGroup(
                                                    panel_descriptionLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.tb_jobdetails_executable,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          27,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE)
                                                            .addComponent(
                                                                          this.jLabel7))
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addGroup(
                                                    panel_descriptionLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.jLabel9)
                                                            .addComponent(
                                                                          this.tb_jobdetails_output,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE))
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addGroup(
                                                    panel_descriptionLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.LEADING)
                                                            .addGroup(
                                                                      panel_descriptionLayout
                                                                              .createSequentialGroup()
                                                                              .addComponent(
                                                                                            this.jLabel10)
                                                                              .addContainerGap())
                                                            .addGroup(
                                                                      panel_descriptionLayout
                                                                              .createSequentialGroup()
                                                                              .addGap(
                                                                                      1,
                                                                                      1,
                                                                                      1)
                                                                              .addComponent(
                                                                                            this.jScrollPane1,
                                                                                            javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                            47,
                                                                                            Short.MAX_VALUE)))));

        this.jLabel8.setText("Worker?");

        this.tb_jobdetails_workerID.setEditable(false);

        final javax.swing.GroupLayout panel_jobdetailsLayout = new javax.swing.GroupLayout(
                this.panel_jobdetails);
        this.panel_jobdetails.setLayout(panel_jobdetailsLayout);
        panel_jobdetailsLayout
                .setHorizontalGroup(panel_jobdetailsLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  javax.swing.GroupLayout.Alignment.TRAILING,
                                  panel_jobdetailsLayout
                                          .createSequentialGroup()
                                          .addGroup(
                                                    panel_jobdetailsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.TRAILING)
                                                            .addGroup(
                                                                      javax.swing.GroupLayout.Alignment.LEADING,
                                                                      panel_jobdetailsLayout
                                                                              .createSequentialGroup()
                                                                              .addContainerGap()
                                                                              .addComponent(
                                                                                            this.panel_description,
                                                                                            javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                            javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                            Short.MAX_VALUE))
                                                            .addGroup(
                                                                      panel_jobdetailsLayout
                                                                              .createSequentialGroup()
                                                                              .addGap(
                                                                                      13,
                                                                                      13,
                                                                                      13)
                                                                              .addGroup(
                                                                                        panel_jobdetailsLayout
                                                                                                .createParallelGroup(
                                                                                                                     javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                .addComponent(
                                                                                                              this.jLabel3,
                                                                                                              javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                                .addComponent(
                                                                                                              this.jLabel1,
                                                                                                              javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                                .addComponent(
                                                                                                              this.jLabel2,
                                                                                                              javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                                .addComponent(
                                                                                                              this.jLabel8,
                                                                                                              javax.swing.GroupLayout.Alignment.TRAILING))
                                                                              .addPreferredGap(
                                                                                               javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                              .addGroup(
                                                                                        panel_jobdetailsLayout
                                                                                                .createParallelGroup(
                                                                                                                     javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                .addGroup(
                                                                                                          panel_jobdetailsLayout
                                                                                                                  .createSequentialGroup()
                                                                                                                  .addGroup(
                                                                                                                            panel_jobdetailsLayout
                                                                                                                                    .createParallelGroup(
                                                                                                                                                         javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.tb_jobdetails_jobuid,
                                                                                                                                                  javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                                  201,
                                                                                                                                                  Short.MAX_VALUE)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.tb_jobdetails_state,
                                                                                                                                                  javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                                  201,
                                                                                                                                                  Short.MAX_VALUE)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.tb_jobdetails_siteid,
                                                                                                                                                  javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                                  201,
                                                                                                                                                  Short.MAX_VALUE))
                                                                                                                  .addGap(
                                                                                                                          13,
                                                                                                                          13,
                                                                                                                          13)
                                                                                                                  .addGroup(
                                                                                                                            panel_jobdetailsLayout
                                                                                                                                    .createParallelGroup(
                                                                                                                                                         javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.jLabel6,
                                                                                                                                                  javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.jLabel5,
                                                                                                                                                  javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.jLabel4,
                                                                                                                                                  javax.swing.GroupLayout.Alignment.TRAILING))
                                                                                                                  .addPreferredGap(
                                                                                                                                   javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                                                                  .addGroup(
                                                                                                                            panel_jobdetailsLayout
                                                                                                                                    .createParallelGroup(
                                                                                                                                                         javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.tb_jobdetails_creationtime,
                                                                                                                                                  javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                                  200,
                                                                                                                                                  Short.MAX_VALUE)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.tb_jobdetails_startedtime,
                                                                                                                                                  javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                                  200,
                                                                                                                                                  Short.MAX_VALUE)
                                                                                                                                    .addComponent(
                                                                                                                                                  this.tb_jobdetails_donetime,
                                                                                                                                                  javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                                  200,
                                                                                                                                                  Short.MAX_VALUE)))
                                                                                                .addComponent(
                                                                                                              this.tb_jobdetails_workerID,
                                                                                                              javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                              478,
                                                                                                              Short.MAX_VALUE))))
                                          .addContainerGap()));
        panel_jobdetailsLayout
                .setVerticalGroup(panel_jobdetailsLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  panel_jobdetailsLayout
                                          .createSequentialGroup()
                                          .addGroup(
                                                    panel_jobdetailsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.jLabel1)
                                                            .addComponent(
                                                                          this.tb_jobdetails_jobuid,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE)
                                                            .addComponent(
                                                                          this.jLabel4)
                                                            .addComponent(
                                                                          this.tb_jobdetails_creationtime,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE))
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addGroup(
                                                    panel_jobdetailsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.tb_jobdetails_state,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE)
                                                            .addComponent(
                                                                          this.jLabel2)
                                                            .addComponent(
                                                                          this.jLabel5)
                                                            .addComponent(
                                                                          this.tb_jobdetails_startedtime,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE))
                                          .addGap(6, 6, 6)
                                          .addGroup(
                                                    panel_jobdetailsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.jLabel3)
                                                            .addComponent(
                                                                          this.tb_jobdetails_siteid,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE)
                                                            .addComponent(
                                                                          this.jLabel6)
                                                            .addComponent(
                                                                          this.tb_jobdetails_donetime,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE))
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addGroup(
                                                    panel_jobdetailsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.jLabel8)
                                                            .addComponent(
                                                                          this.tb_jobdetails_workerID,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                          javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                          javax.swing.GroupLayout.PREFERRED_SIZE))
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addComponent(
                                                        this.panel_description,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        Short.MAX_VALUE)));

        final javax.swing.GroupLayout panel_topLayout = new javax.swing.GroupLayout(
                this.panel_top);
        this.panel_top.setLayout(panel_topLayout);
        panel_topLayout
                .setHorizontalGroup(panel_topLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(
                                      this.panel_table,
                                      javax.swing.GroupLayout.Alignment.TRAILING,
                                      javax.swing.GroupLayout.DEFAULT_SIZE,
                                      580, Short.MAX_VALUE)
                        .addGroup(
                                  panel_topLayout
                                          .createParallelGroup(
                                                               javax.swing.GroupLayout.Alignment.LEADING)
                                          .addComponent(
                                                        this.panel_jobdetails,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        Short.MAX_VALUE)));
        panel_topLayout
                .setVerticalGroup(panel_topLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(
                                      this.panel_table,
                                      javax.swing.GroupLayout.Alignment.TRAILING,
                                      javax.swing.GroupLayout.DEFAULT_SIZE,
                                      293, Short.MAX_VALUE)
                        .addGroup(
                                  panel_topLayout
                                          .createParallelGroup(
                                                               javax.swing.GroupLayout.Alignment.LEADING)
                                          .addComponent(
                                                        this.panel_jobdetails,
                                                        javax.swing.GroupLayout.Alignment.TRAILING,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        Short.MAX_VALUE)));

        this.panel_buttons.setBorder(javax.swing.BorderFactory
                .createBevelBorder(javax.swing.border.BevelBorder.RAISED));

        this.l_selectedjob.setText("job/worker");

        this.btn_kill.setText("kill");
        this.btn_kill.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_killActionPerformed(evt);
            }
        });

        this.btn_refresh.setText("refresh");
        this.btn_refresh.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_refreshActionPerformed(evt);
            }
        });

        this.btn_cleanup.setText("cleanup");
        this.btn_cleanup.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_cleanupActionPerformed(evt);
            }
        });

        this.btn_kill1.setText("stop");
        this.btn_kill1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_kill1ActionPerformed(evt);
            }
        });

        final javax.swing.GroupLayout panel_buttonsLayout = new javax.swing.GroupLayout(
                this.panel_buttons);
        this.panel_buttons.setLayout(panel_buttonsLayout);
        panel_buttonsLayout
                .setHorizontalGroup(panel_buttonsLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  panel_buttonsLayout
                                          .createSequentialGroup()
                                          .addContainerGap()
                                          .addGroup(
                                                    panel_buttonsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.LEADING)
                                                            .addComponent(
                                                                          this.l_selectedjob)
                                                            .addGroup(
                                                                      panel_buttonsLayout
                                                                              .createSequentialGroup()
                                                                              .addComponent(
                                                                                            this.btn_kill1,
                                                                                            javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                            61,
                                                                                            javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                              .addPreferredGap(
                                                                                               javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                              .addComponent(
                                                                                            this.btn_kill,
                                                                                            javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                            61,
                                                                                            javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                              .addPreferredGap(
                                                                                               javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                              .addComponent(
                                                                                            this.btn_refresh)
                                                                              .addGap(
                                                                                      6,
                                                                                      6,
                                                                                      6)
                                                                              .addComponent(
                                                                                            this.btn_cleanup)))
                                          .addContainerGap(298, Short.MAX_VALUE)));

        panel_buttonsLayout
                .linkSize(javax.swing.SwingConstants.HORIZONTAL,
                          new java.awt.Component[] { this.btn_cleanup,
                                  this.btn_kill, this.btn_kill1,
                                  this.btn_refresh });

        panel_buttonsLayout
                .setVerticalGroup(panel_buttonsLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  panel_buttonsLayout
                                          .createSequentialGroup()
                                          .addComponent(this.l_selectedjob)
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addGroup(
                                                    panel_buttonsLayout
                                                            .createParallelGroup(
                                                                                 javax.swing.GroupLayout.Alignment.BASELINE)
                                                            .addComponent(
                                                                          this.btn_kill)
                                                            .addComponent(
                                                                          this.btn_kill1)
                                                            .addComponent(
                                                                          this.btn_refresh)
                                                            .addComponent(
                                                                          this.btn_cleanup))
                                          .addContainerGap(
                                                           javax.swing.GroupLayout.DEFAULT_SIZE,
                                                           Short.MAX_VALUE)));

        final javax.swing.GroupLayout jPanelRightLayout = new javax.swing.GroupLayout(
                this.jPanelRight);
        this.jPanelRight.setLayout(jPanelRightLayout);
        jPanelRightLayout.setHorizontalGroup(jPanelRightLayout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(this.panel_top,
                              javax.swing.GroupLayout.Alignment.TRAILING,
                              javax.swing.GroupLayout.DEFAULT_SIZE, 580,
                              Short.MAX_VALUE)
                .addComponent(this.panel_buttons,
                              javax.swing.GroupLayout.Alignment.TRAILING,
                              javax.swing.GroupLayout.DEFAULT_SIZE,
                              javax.swing.GroupLayout.DEFAULT_SIZE,
                              Short.MAX_VALUE));
        jPanelRightLayout
                .setVerticalGroup(jPanelRightLayout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  javax.swing.GroupLayout.Alignment.TRAILING,
                                  jPanelRightLayout
                                          .createSequentialGroup()
                                          .addComponent(
                                                        this.panel_top,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        293, Short.MAX_VALUE)
                                          .addPreferredGap(
                                                           javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                          .addComponent(
                                                        this.panel_buttons,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)));

        this.jSplitPane1.setRightComponent(this.jPanelRight);

        this.sp_tree.setMinimumSize(new java.awt.Dimension(100, 25));

        this.tree_jobs.setModel(this.treeModel);
        this.tree_jobs.setMinimumSize(new java.awt.Dimension(100, 100));
        this.tree_jobs
                .addTreeSelectionListener(new javax.swing.event.TreeSelectionListener() {
                    public void valueChanged(
                            final javax.swing.event.TreeSelectionEvent evt) {
                        MainWindow.this.tree_jobsValueChanged(evt);
                    }
                });
        this.sp_tree.setViewportView(this.tree_jobs);

        this.jSplitPane1.setLeftComponent(this.sp_tree);

        this.toolbar_main.setFloatable(false);
        this.toolbar_main.setRollover(true);

        this.btn_add.setIcon(new javax.swing.ImageIcon(this.getClass()
                .getResource("/add.png"))); // NOI18N
        this.btn_add.setBorder(new javax.swing.border.SoftBevelBorder(
                javax.swing.border.BevelBorder.RAISED));
        this.btn_add.setFocusable(false);
        this.btn_add
                .setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        this.btn_add.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        this.btn_add.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_add(evt);
            }
        });
        this.toolbar_main.add(this.btn_add);

        this.jButton3.setIcon(new javax.swing.ImageIcon(this.getClass()
                .getResource("/window-close.png"))); // NOI18N
        this.jButton3.setBorder(new javax.swing.border.SoftBevelBorder(
                javax.swing.border.BevelBorder.RAISED));
        this.jButton3.setFocusable(false);
        this.jButton3
                .setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        this.jButton3
                .setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        this.toolbar_main.add(this.jButton3);

        this.btn_remove.setIcon(new javax.swing.ImageIcon(this.getClass()
                .getResource("/stop.png"))); // NOI18N
        this.btn_remove.setBorder(new javax.swing.border.SoftBevelBorder(
                javax.swing.border.BevelBorder.RAISED));
        this.btn_remove.setFocusable(false);
        this.btn_remove
                .setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        this.btn_remove
                .setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        this.btn_remove.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_remove(evt);
            }
        });
        this.toolbar_main.add(this.btn_remove);

        this.btn_ping.setText("Ping");
        this.btn_ping.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(final java.awt.event.ActionEvent evt) {
                MainWindow.this.btn_ping(evt);
            }
        });
        this.toolbar_main.add(this.btn_ping);

        this.jButton1.setIcon(new javax.swing.ImageIcon(this.getClass()
                .getResource("/view-refresh.png"))); // NOI18N
        this.jButton1.setBorder(new javax.swing.border.SoftBevelBorder(
                javax.swing.border.BevelBorder.RAISED));
        this.jButton1.setFocusable(false);
        this.jButton1
                .setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        this.jButton1
                .setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        this.toolbar_main.add(this.jButton1);

        this.jButton2.setIcon(new javax.swing.ImageIcon(this.getClass()
                .getResource("/edit-clear.png"))); // NOI18N
        this.jButton2.setBorder(new javax.swing.border.SoftBevelBorder(
                javax.swing.border.BevelBorder.RAISED));
        this.jButton2.setFocusable(false);
        this.jButton2
                .setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        this.jButton2
                .setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        this.toolbar_main.add(this.jButton2);

        this.menu_file.setText("File");

        this.menu_item_newjob.setText("New Job");
        this.menu_item_newjob
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(
                            final java.awt.event.ActionEvent evt) {
                        MainWindow.this.menu_item_newjobActionPerformed(evt);
                    }
                });
        this.menu_file.add(this.menu_item_newjob);

        this.menu_item_stopserver.setText("Stop Server");
        this.menu_item_stopserver
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(
                            final java.awt.event.ActionEvent evt) {
                        MainWindow.this
                                .menu_item_stopserverActionPerformed(evt);
                    }
                });
        this.menu_file.add(this.menu_item_stopserver);

        this.menu_item_options.setText("Options");
        this.menu_item_options
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(
                            final java.awt.event.ActionEvent evt) {
                        MainWindow.this.menu_item_optionsActionPerformed(evt);
                    }
                });
        this.menu_file.add(this.menu_item_options);

        this.menu_item_exit.setText("Exit");
        this.menu_item_exit
                .addActionListener(new java.awt.event.ActionListener() {
                    public void actionPerformed(
                            final java.awt.event.ActionEvent evt) {
                        MainWindow.this.menu_item_exitActionPerformed(evt);
                    }
                });
        this.menu_file.add(this.menu_item_exit);

        this.jMenuBar1.add(this.menu_file);

        this.setJMenuBar(this.jMenuBar1);

        final javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this
                .getContentPane());
        this.getContentPane().setLayout(layout);
        layout
                .setHorizontalGroup(layout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  layout
                                          .createSequentialGroup()
                                          .addGap(12, 12, 12)
                                          .addComponent(
                                                        this.jSplitPane1,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        685, Short.MAX_VALUE)
                                          .addContainerGap())
                        .addComponent(this.toolbar_main,
                                      javax.swing.GroupLayout.DEFAULT_SIZE,
                                      709, Short.MAX_VALUE));
        layout
                .setVerticalGroup(layout
                        .createParallelGroup(
                                             javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(
                                  layout
                                          .createSequentialGroup()
                                          .addComponent(
                                                        this.toolbar_main,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        34,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                          .addGap(18, 18, 18)
                                          .addComponent(
                                                        this.jSplitPane1,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        367, Short.MAX_VALUE)
                                          .addContainerGap()));

        this.pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btn_ping(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_ping
        if (this.businessman.isOnline()) {
            final boolean ping = this.wmsx_service.ping(false);
            final boolean fullping = this.wmsx_service.ping(true);

            if (ping && fullping) {
                JOptionPane.showMessageDialog(this, "Ping to provider was ok!",
                                              "WMSX GUI - Ping",
                                              JOptionPane.INFORMATION_MESSAGE);
            }
            else {
                JOptionPane.showMessageDialog(this, "Ping to provider failed!",
                                              "WMSX GUI - Ping",
                                              JOptionPane.ERROR_MESSAGE);
            }
        }
    }// GEN-LAST:event_btn_ping

    private void btn_add(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_add
        if (this.businessman.isOnline()) {
            // System.out.println("btn_add...");

            final NewJob newjob = new NewJob(this);
            System.out.println("Show NewJobDialog...");
            newjob.setVisible(true);
        }
    }// GEN-LAST:event_btn_add

    private void btn_remove(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_remove
        if (this.businessman.isOnline()) {
            System.out.println("btn_remove...");
        }
    }// GEN-LAST:event_btn_remove

    private void menu_item_optionsActionPerformed(
            final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_menu_item_optionsActionPerformed
        if (this.businessman.isOnline()) {
            if (this.optionen == null) {
                this.optionen = new Options();
            }
            // System.out.println("Show OptionsDialog...");
            this.optionen.setVisible(true);
        }
    }// GEN-LAST:event_menu_item_optionsActionPerformed

    private void menu_item_stopserverActionPerformed(
            final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_menu_item_stopserverActionPerformed
        if (this.businessman.isOnline()) {
            this.wmsx_service.shutdownWorkers();
        }
    }// GEN-LAST:event_menu_item_stopserverActionPerformed

    private void menu_item_exitActionPerformed(
            final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_menu_item_exitActionPerformed
        System.exit(0);
    }// GEN-LAST:event_menu_item_exitActionPerformed

    private void menu_item_newjobActionPerformed(
            final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_menu_item_newjobActionPerformed
        if (this.businessman.isOnline()) {
            final NewJob newjob = new NewJob(this);
            // System.out.println("MainWindow: Show NewJobDialog...");
            newjob.setVisible(true);
        }
    }// GEN-LAST:event_menu_item_newjobActionPerformed

    private void btn_killActionPerformed(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_killActionPerformed
        // TODO add your handling code here:
    }// GEN-LAST:event_btn_killActionPerformed

    private void btn_refreshActionPerformed(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_refreshActionPerformed

        this.updateBusinessManager();
    }// GEN-LAST:event_btn_refreshActionPerformed

    private void tree_jobsValueChanged(
            final javax.swing.event.TreeSelectionEvent evt) {// GEN-FIRST:event_tree_jobsValueChanged
        final DefaultMutableTreeNode node = (DefaultMutableTreeNode) this.tree_jobs
                .getLastSelectedPathComponent();

        if (node != null) {
            if (node.getUserObject().getClass().getSimpleName()
                    .equals("JobData")) {
                this.setJobDetails((JobData) node.getUserObject());

                // change top panel
                this.panel_table.setVisible(false);
                this.panel_jobdetails.setVisible(true);

                if (this.businessman.isOnline()) {
                    // enable remove buttons
                    this.btn_remove.setEnabled(true);
                    this.btn_kill.setEnabled(true);
                }
            }
            else {
                this.businessman.setCurrentBackend(node.getUserObject()
                        .toString());

                this.panel_table.setVisible(true);
                this.panel_jobdetails.setVisible(false);

                // disable remove buttons
                this.btn_remove.setEnabled(false);
                this.btn_kill.setEnabled(false);
            }

            this.l_selectedjob.setText(node.getUserObject().toString());
        }
    }// GEN-LAST:event_tree_jobsValueChanged

    private void btn_cleanupActionPerformed(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_cleanupActionPerformed
        // TODO add your handling code here:
    }// GEN-LAST:event_btn_cleanupActionPerformed

    private void btn_kill1ActionPerformed(final java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btn_kill1ActionPerformed
        // TODO add your handling code here:
    }// GEN-LAST:event_btn_kill1ActionPerformed

    private void table_jobsMouseClicked(final java.awt.event.MouseEvent evt) {// GEN-FIRST:event_table_jobsMouseClicked

        final int row = this.table_jobs.getSelectedRow();
        final TransportJobUID jobUid = (TransportJobUID) this.table_jobs
                .getValueAt(row, 0);
        this.l_selectedjob.setText(jobUid.toString());

        if (evt.getClickCount() > 1) {
            // System.out.println("doubleclick");

            // select Item in the Tree
            final DefaultMutableTreeNode root = (DefaultMutableTreeNode) this.tree_jobs
                    .getModel().getRoot();

            final Enumeration enumeration = root.children();
            while (enumeration.hasMoreElements()) {
                final DefaultMutableTreeNode node = (DefaultMutableTreeNode) enumeration
                        .nextElement();
                final String backend = (String) node.getUserObject();
                if (backend.equals(jobUid.getBackend())) {
                    final Enumeration enumeration2 = node.children();
                    while (enumeration2.hasMoreElements()) {
                        final DefaultMutableTreeNode node2 = (DefaultMutableTreeNode) enumeration2
                                .nextElement();
                        final JobData jobData = (JobData) node2.getUserObject();

                        if (jobData.getTransportJobUID().equals(jobUid)) {
                            this.tree_jobs.setSelectionPath(new TreePath(node2
                                    .getPath()));
                        }
                    }

                }

            }

        }
    }// GEN-LAST:event_table_jobsMouseClicked

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton     btn_add;
    private javax.swing.JButton     btn_cleanup;
    private javax.swing.JButton     btn_kill;
    private javax.swing.JButton     btn_kill1;
    private javax.swing.JButton     btn_ping;
    private javax.swing.JButton     btn_refresh;
    private javax.swing.JButton     btn_remove;
    private javax.swing.JButton     jButton1;
    private javax.swing.JButton     jButton2;
    private javax.swing.JButton     jButton3;
    private javax.swing.JLabel      jLabel1;
    private javax.swing.JLabel      jLabel10;
    private javax.swing.JLabel      jLabel2;
    private javax.swing.JLabel      jLabel3;
    private javax.swing.JLabel      jLabel4;
    private javax.swing.JLabel      jLabel5;
    private javax.swing.JLabel      jLabel6;
    private javax.swing.JLabel      jLabel7;
    private javax.swing.JLabel      jLabel8;
    private javax.swing.JLabel      jLabel9;
    private javax.swing.JMenuBar    jMenuBar1;
    private javax.swing.JPanel      jPanelRight;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JSplitPane  jSplitPane1;
    private javax.swing.JLabel      l_selectedjob;
    private javax.swing.JMenu       menu_file;
    private javax.swing.JMenuItem   menu_item_exit;
    private javax.swing.JMenuItem   menu_item_newjob;
    private javax.swing.JMenuItem   menu_item_options;
    private javax.swing.JMenuItem   menu_item_stopserver;
    private javax.swing.JPanel      panel_buttons;
    private javax.swing.JPanel      panel_description;
    private javax.swing.JPanel      panel_jobdetails;
    private javax.swing.JScrollPane panel_table;
    private javax.swing.JPanel      panel_top;
    private javax.swing.JScrollPane sp_tree;
    private javax.swing.JTextArea   ta_jobdetails_description;
    private javax.swing.JTable      table_jobs;
    private javax.swing.JTextField  tb_jobdetails_creationtime;
    private javax.swing.JTextField  tb_jobdetails_donetime;
    private javax.swing.JTextField  tb_jobdetails_executable;
    private javax.swing.JTextField  tb_jobdetails_jobuid;
    private javax.swing.JTextField  tb_jobdetails_output;
    private javax.swing.JTextField  tb_jobdetails_siteid;
    private javax.swing.JTextField  tb_jobdetails_startedtime;
    private javax.swing.JTextField  tb_jobdetails_state;
    private javax.swing.JTextField  tb_jobdetails_workerID;
    private javax.swing.JToolBar    toolbar_main;
    private javax.swing.JTree       tree_jobs;

    // End of variables declaration//GEN-END:variables

    private void updateTreeModel() {
        System.out.println("MainWindow: updateTreeModel...");

        this.rootNode = new DefaultMutableTreeNode("Backends");

        if (this.businessman.isOnline()) {
            for (final String backend : this.businessman.getBackends()) {
                // System.out.println(backend);
                // add Backend
                final DefaultMutableTreeNode backendnode = new DefaultMutableTreeNode(
                        backend);
                // add jobs for backend
                for (final JobData jobdata : this.businessman.getJobs(backend)) {
                    backendnode.add(new DefaultMutableTreeNode(jobdata));
                }

                this.rootNode.add(backendnode);

            }

            this.treeModel = new DefaultTreeModel(this.rootNode);
            this.tree_jobs.setModel(this.treeModel);

            // restore Expanded Nodes
            for (final int row : this.businessman.getExpansionStateRows()) {
                System.out.println("MainWindow: setExpandedRow: " + row);
                this.tree_jobs.expandRow(row);
            }

        }
        else { // offline Demo Mode

            DefaultMutableTreeNode node1 = new DefaultMutableTreeNode("Fake");

            this.rootNode.add(node1);
            node1 = new DefaultMutableTreeNode("Worker");
            this.rootNode.add(node1);
            node1 = new DefaultMutableTreeNode("Local");
            this.rootNode.add(node1);
            node1 = new DefaultMutableTreeNode("Gat");
            this.rootNode.add(node1);

            this.treeModel = new DefaultTreeModel(this.rootNode);
            this.tree_jobs.setModel(this.treeModel);

        }

        // tree_jobs.updateUI();
    }

    public void update(final Observable o, final Object obj) {
        if ((obj == null) || (!obj.getClass().getSimpleName().equals("String"))) {
            System.out.println("MainWindow: updateObserver...");
            this.businessman.saveExpansionState(this.tree_jobs);
            this.updateTreeModel();

            if ((obj != null)
                    && (obj.getClass().getSimpleName().equals("JobData"))) {
                final JobData job = (JobData) obj;
                if ((this.panel_jobdetails.isVisible())
                        && (this.tb_jobdetails_jobuid.getText().equals(job
                                .getTransportJobUID().toString()))) {
                    this.setJobDetails(job);
                }
            }
        }
    }

    public void updateBusinessManager() {
        this.businessman.refreshData();
    }

    private void setJobDetails(final JobData job) {
        if (job != null) {
            System.out.println("MainWindow: setJobDetails.. job: " + job);
            this.tb_jobdetails_jobuid.setText(job.getTransportJobUID()
                    .toString());
            this.tb_jobdetails_state.setText(job.getJobinfo().getStatus()
                    .toString());
            this.tb_jobdetails_siteid.setText(job.getJobinfo().getSiteId());

            this.tb_jobdetails_creationtime.setText((job.getJobinfo()
                    .getCreationTime() != null) ? job.getJobinfo()
                    .getCreationTime().toString() : "");
            this.tb_jobdetails_startedtime.setText((job.getJobinfo()
                    .getStartRunningTime() != null) ? job.getJobinfo()
                    .getStartRunningTime().toString() : "");
            this.tb_jobdetails_donetime.setText((job.getJobinfo()
                    .getDoneRunningTime() != null) ? job.getJobinfo()
                    .getDoneRunningTime().toString() : "");

            this.tb_jobdetails_executable.setText(job.getJobinfo()
                    .getExecutable());
            this.tb_jobdetails_output.setText(job.getJobinfo().getOutput());
            this.ta_jobdetails_description.setText(job.getJobinfo()
                    .getDescription());

            final boolean isworker = job.getJobinfo().isWorker();
            final Uuid workerID = job.getJobinfo().getWorkerId();

            final String jobtxt = "I am a job executed without a worker";
            final String workertxt = "I am a worker my workerID is ";
            final String workerjob = "I am job executed by workerID ";
            String workerinfo = new String();
            if (!isworker && (workerID == null)) { // normaler job
                workerinfo = jobtxt;
            }
            if (!isworker && (workerID != null)) { // job mit worker
                workerinfo = workerjob + workerID;
            }
            if (isworker && (workerID != null)) { // worker
                workerinfo = workertxt + workerID;
            }
            this.tb_jobdetails_workerID.setText(workerinfo);

        }
    }
}
